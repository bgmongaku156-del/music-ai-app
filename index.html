<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width">
</head>

<body style="background:black;color:white;padding:20px;">

<h2>AI音楽生成</h2>

<textarea id="prompt" style="width:100%;height:120px;">
sleep relaxing ambient music no vocals
</textarea>

<button onclick="make()" style="width:100%;padding:20px;font-size:20px;">
生成
</button>

<audio id="player" controls style="width:100%;margin-top:20px;"></audio>

<a id="download" style="color:lime;display:block;margin-top:10px;">
ダウンロード
</a>

<script>

async function make(){

const prompt=
document.getElementById("prompt").value

const r=await fetch("/api/music",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
prompt:prompt
})
})

const d=await r.json()

if(d.url){

player.src=d.url
download.href=d.url

}else{

alert("生成失敗")
console.log(d)

}

}

</script>

</body>
</html>

<!DOCTYPE html>
<html>

<body style="background:black;color:white;text-align:center">

<h2>AI音楽生成</h2>

<textarea id="prompt" style="width:90%;height:100px">
relaxing music
</textarea>

<br><br>

<button onclick="gen(30)">
生成
</button>

<br><br>

<div id="status">
待機中
</div>

<br>

<audio id="audio" controls style="width:90%"></audio>

<script>

async function gen(sec){

status.innerHTML="生成中...";

try{

const res=await fetch("/api/music",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
prompt:prompt.value,
duration:sec
})
});

const data=await res.json();

audio.src=data.url;

status.innerHTML="生成完了";

}catch(e){

status.innerHTML="生成失敗";

}

}

</script>

</body>

</html>

<!DOCTYPE html>
<html lang="ja">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>AI音楽生成</title>

<style>

body{
background:#000;
color:white;
font-family:sans-serif;
padding:20px;
}

textarea{
width:100%;
height:120px;
font-size:18px;
}

button{
width:100%;
padding:18px;
font-size:20px;
margin-top:10px;
background:green;
color:white;
border:none;
border-radius:10px;
}

audio{
width:100%;
margin-top:20px;
}

a{
display:block;
margin-top:15px;
color:lime;
font-size:18px;
}

</style>

</head>

<body>

<h2>AI音楽生成（商用利用OK）</h2>

<textarea id="prompt">
relaxing sleep music calm ambient no vocals
</textarea>

<button onclick="generate(300)">
5分生成
</button>

<button onclick="generate(600)">
10分生成
</button>

<audio id="player" controls></audio>

<a id="download" download="music.wav">
ダウンロード
</a>

<script>

async function generate(seconds){

const prompt =
document.getElementById("prompt").value;

const res =
await fetch("/api/music",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
prompt:prompt,
seconds:seconds
})
});

const data = await res.json();

if(data.url){

document.getElementById("player").src =
data.url;

document.getElementById("download").href =
data.url;

}else{

alert("生成失敗");

console.log(data);

}

}

</script>

</body>

</html>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI音楽生成</title>

<style>
body{
background:black;
color:white;
text-align:center;
font-family:sans-serif;
}

textarea{
width:90%;
height:100px;
font-size:18px;
}

button{
padding:15px;
font-size:20px;
margin:10px;
background:green;
color:white;
border:none;
border-radius:10px;
}

audio{
width:90%;
margin-top:20px;
}

</style>

</head>

<body>

<h2>AI音楽生成</h2>

<textarea id="prompt">
relaxing ambient music
</textarea>

<br>

<button onclick="generate(10)">
生成
</button>

<br>

<div id="status">
待機中
</div>

<br>

<audio id="player" controls></audio>

<script>

async function generate(sec){

document.getElementById("status").innerHTML="生成中...";

try{

let res=await fetch("/api/music",{

method:"POST",

headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({
prompt:document.getElementById("prompt").value,
duration:sec
})

});

let data=await res.json();

document.getElementById("player").src=data.url;

document.getElementById("status").innerHTML="生成完了";

}catch(e){

document.getElementById("status").innerHTML="生成失敗";

}

}

</script>

</body>
</html>

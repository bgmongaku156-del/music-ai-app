<script>

async function gen(){

const prompt =
document.getElementById("prompt").value;

const r =
await fetch("/api/music",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
prompt:prompt
})
});

const d=await r.json();

if(d.url){

const player =
document.getElementById("player");

player.src=d.url;

// 重要
player.load();
player.play();

document.getElementById("download").href=d.url;

}else{

alert("生成失敗");

console.log(d);

}

}

</script>

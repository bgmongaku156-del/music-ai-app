<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width">
</head>

<body>

<h2>AI音楽生成</h2>

<textarea id="prompt">
relaxing sleep music
</textarea>

<br><br>

<button onclick="gen()">
音楽生成
</button>

<br><br>

<audio id="player" controls></audio>

<br><br>

<a id="download" download="music.wav">
ダウンロード
</a>

<script>

async function gen(){

const prompt =
document.getElementById("prompt").value;

const r =
await fetch("/api/music",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
prompt:prompt
})
});

const d = await r.json();

if(d.url){

// blobを使わない
document.getElementById("player").src =
d.url;

document.getElementById("download").href =
d.url;

}else{

alert("生成失敗");

}

}

</script>

</body>

</html>

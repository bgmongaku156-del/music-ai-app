<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width">
</head>

<body style="background:black;color:white;padding:20px;">

<h2>AI音楽生成</h2>

<textarea id="prompt"
style="width:100%;height:120px;">

relaxing sleep ambient music

</textarea>

<button onclick="make10()"
style="width:100%;padding:20px;font-size:20px;">

10秒生成

</button>

<button onclick="make3min()"
style="width:100%;padding:20px;font-size:20px;">

3分生成（高音質）

</button>

<audio id="player"
controls
style="width:100%;margin-top:20px;">
</audio>

<script>

async function make10(){

const prompt=
document.getElementById("prompt").value

const r=await fetch("/api/music",{

method:"POST",

headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({
prompt:prompt,
parts:1
})

})

const d=await r.json()

player.src=d.urls[0]

}



async function make3min(){

const prompt=
document.getElementById("prompt").value

const r=await fetch("/api/music",{

method:"POST",

headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({
prompt:prompt,
parts:18
})

})

const d=await r.json()

let list=d.urls

let i=0

player.src=list[0]

player.onended=function(){

i++

if(i<list.length){

player.src=list[i]

player.play()

}

}

player.play()

}

</script>

</body>

</html>

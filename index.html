<!DOCTYPE html>
<html lang="ja">

<head>

<meta charset="UTF-8">

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>10分EDM自動生成</title>

<style>

body{
font-family:sans-serif;
text-align:center;
padding:30px;
background:#111;
color:white;
}

button{
font-size:20px;
padding:15px;
margin:10px;
border-radius:12px;
border:none;
background:#4CAF50;
color:white;
}

audio{
width:90%;
margin-top:20px;
}

input{
font-size:18px;
padding:10px;
width:80%;
}

</style>

</head>

<body>

<h2>AI 10分EDM生成</h2>

<input id="prompt"
placeholder="Driving EDM">

<br>

<button onclick="generate()">
10分生成
</button>

<br>

<audio id="player"
controls></audio>

<script>

let list=[];
let index=0;

async function generate(){

const prompt =
document.getElementById("prompt").value
|| "Driving EDM";

const res =
await fetch(
"/api/music?prompt="+prompt
);

const data =
await res.json();

list=data.list;

index=0;

playNext();

}



function playNext(){

if(index>=list.length)return;

const player =
document.getElementById("player");

player.src=list[index];

player.play();

index++;

player.onended=playNext;

}

</script>

</body>

</html>
